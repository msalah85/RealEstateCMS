var DefaultMasterDetailsManager=function(){var i=function(){$("#btnAddNew").on("click",function(){var n="Add "+TitlePage;commonManger.ResetControls(formName);commonManger.showPopUpDialog(n,"save",modalDialog)});commonManger.fillLists();$(document).bind("properties_complete",u);r()},r=function(){$("#"+modalDialog+" .modal-body .btn-primary").on("click",function(i){i.preventDefault();commonManger.saveData(modalDialog,formName,n,t)});$(".modal-body button.clse, .modal-header .close").on("click",function(n){commonManger.ResetControls(formName);n.preventDefault()});$("#"+deleteModalDialog+" .modal-footer .btn-delete").on("click",function(i){i.preventDefault();commonManger.deleteData(deleteModalDialog,formName,n,t)})},n=function(n){n=n.d;$("#"+modalDialog).modal("hide");commonManger.showMessage("Data has been saved:",n.message);n.Status&&$("#"+gridId).DataTable().draw(!0)},t=function(n,t,i){title=t+": "+i;message=JSON.parse(n.responseText).Message;commonManger.showMessage("danger",title,message)},u=function(){var n=$("#"+gridId).DataTable({bAutoWidth:!1,bServerSide:!0,sAjaxSource:sUrl+"LoadDataTables?funName="+tableName+"_SelectList",fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){i(n.d)},commonManger.errorException)},iDisplayLength:50,aaSorting:[],aoColumns:gridColumns}),t,i;$.fn.dataTable.Buttons.swfPath="/Content/sys/assets/js/dataTables/extensions/Buttons/swf/flashExport.swf";$.fn.dataTable.Buttons.defaults.dom.container.className="dt-buttons btn-overlap btn-group btn-overlap";new $.fn.dataTable.Buttons(n,{buttons:[{extend:"colvis",text:"<i class='fa fa-search bigger-110 blue'><\/i> <span class='hidden'>Show/hide columns<\/span>",className:"btn btn-white btn-primary btn-bold",columns:":not(:first):not(:last)"},{extend:"copy",text:"<i class='fa fa-copy bigger-110 pink'><\/i> <span class='hidden'>Copy to clipboard<\/span>",className:"btn btn-white btn-primary btn-bold"},{extend:"csv",text:"<i class='fa fa-database bigger-110 orange'><\/i> <span class='hidden'>Export to CSV<\/span>",className:"btn btn-white btn-primary btn-bold"},{extend:"excel",text:"<i class='fa fa-file-excel-o bigger-110 green'><\/i> <span class='hidden'>Export to Excel<\/span>",className:"btn btn-white btn-primary btn-bold"},{extend:"pdf",text:"<i class='fa fa-file-pdf-o bigger-110 red'><\/i> <span class='hidden'>Export to PDF<\/span>",className:"btn btn-white btn-primary btn-bold"},{extend:"print",text:"<i class='fa fa-print bigger-110 grey'><\/i> <span class='hidden'>Print<\/span>",className:"btn btn-white btn-primary btn-bold",autoPrint:!0,message:"SMS System"}]});n.buttons().container().appendTo($(".tableTools-container"));t=n.button(1).action();n.button(1).action(function(n,i,r,u){t(n,i,r,u);$(".dt-button-info").addClass("gritter-item-wrapper gritter-info gritter-center white")});i=n.button(0).action();n.button(0).action(function(n,t,r,u){i(n,t,r,u);$(".dt-button-collection > .dropdown-menu").length==0&&$(".dt-button-collection").wrapInner('<ul class="dropdown-menu dropdown-light dropdown-caret dropdown-caret" />').find("a").attr("href","#").wrap("<li />");$(".dt-button-collection").appendTo(".tableTools-container .dt-buttons")});$("#"+gridId+" tbody").delegate("tr button","click",function(t){var u,f,i,h,s,o;if(t.preventDefault(),u=$(this),f=u.closest("tr"),f!==null)if(u.hasClass("edit"))h="Edit "+TitlePage,s="save",i=n.row(f).data(),commonManger.ResetControls(formName),commonManger.getDataForUpdate(i,formName),commonManger.showPopUpDialog(h,s,modalDialog);else if(u.hasClass("remove")){i=n.row(f).data();var c=" Delete "+TitlePage,r=[],e="";if(pKey.toLowerCase().indexOf(",")>=0){for(r=pKey.split(","),o=0;o<r.length-1;o++)e+=i[r[o]]+",";e+=i[r[r.length-1]]}else e=i[pKey];$("#"+deleteModalDialog).find(".removeField").text(e);commonManger.showPopUpDialog(c,s,deleteModalDialog)}})};return{Init:i}}();