/*!
Holder - client side image placeholders
Version 2.8.0+7srgw
© 2015 Ivan Malopinsky - http://imsky.co
Site:     http://holderjs.com
Issues:   https://github.com/imsky/holder/issues
License:  MIT
*/
(function(n){if(n.document){var t=n.document;t.querySelectorAll||(t.querySelectorAll=function(i){var r=t.createElement("style"),f=[],u;for(t.documentElement.firstChild.appendChild(r),t._qsa=[],r.styleSheet.cssText=i+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",n.scrollBy(0,0),r.parentNode.removeChild(r);t._qsa.length;)u=t._qsa.shift(),u.style.removeAttribute("x-qsa"),f.push(u);return t._qsa=null,f});t.querySelector||(t.querySelector=function(n){var i=t.querySelectorAll(n);return i.length?i[0]:null});t.getElementsByClassName||(t.getElementsByClassName=function(n){return n=String(n).replace(/^|\s+/g,"."),t.querySelectorAll(n)});Object.keys||(Object.keys=function(n){if(n!==Object(n))throw TypeError("Object.keys called on non-object");var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t}),function(n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.atob=n.atob||function(n){n=String(n);var f=0,r=[],i=0,u=0,e;if(n=n.replace(/\s/g,""),n.length%4==0&&(n=n.replace(/=+$/,"")),n.length%4==1)throw Error("InvalidCharacterError");if(/[^+/0-9A-Za-z]/.test(n))throw Error("InvalidCharacterError");while(f<n.length)e=t.indexOf(n.charAt(f)),i=i<<6|e,u+=6,u===24&&(r.push(String.fromCharCode(i>>16&255)),r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(i&255)),u=0,i=0),f+=1;return u===12?(i=i>>4,r.push(String.fromCharCode(i&255))):u===18&&(i=i>>2,r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(i&255))),r.join("")};n.btoa=n.btoa||function(n){n=String(n);var i=0,s=[],u,f,e,h,c,o,r;if(/[^\x00-\xFF]/.test(n))throw Error("InvalidCharacterError");while(i<n.length)u=n.charCodeAt(i++),f=n.charCodeAt(i++),e=n.charCodeAt(i++),h=u>>2,c=(u&3)<<4|f>>4,o=(f&15)<<2|e>>6,r=e&63,i===n.length+2?(o=64,r=64):i===n.length+1&&(r=64),s.push(t.charAt(h),t.charAt(c),t.charAt(o),t.charAt(r));return s.join("")}}(n);Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(n){var t=this.__proto__||this.constructor.prototype;return n in this&&(!(n in t)||t[n]!==this[n])});
// @license http://opensource.org/licenses/MIT
(function(){if("performance"in n==!1&&(n.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in n.performance==!1){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart);n.performance.now=function(){return Date.now()-t}}})();n.requestAnimationFrame||(n.webkitRequestAnimationFrame?function(n){n.requestAnimationFrame=function(t){return webkitRequestAnimationFrame(function(){t(n.performance.now())})};n.cancelAnimationFrame=webkitCancelAnimationFrame}(n):n.mozRequestAnimationFrame?function(n){n.requestAnimationFrame=function(t){return mozRequestAnimationFrame(function(){t(n.performance.now())})};n.cancelAnimationFrame=mozCancelAnimationFrame}(n):function(n){n.requestAnimationFrame=function(t){return n.setTimeout(t,1e3/60)};n.cancelAnimationFrame=n.clearTimeout}(n))}})(this),function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define(t):typeof exports=="object"?exports.Holder=t():n.Holder=t()}(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){n.exports=i(1)},function(n,t,i){(function(t){function s(n,t,i,r){var u=k(i.substr(i.lastIndexOf(n.domain)),n);u&&d({mode:null,el:r,flags:u,engineSettings:t})}function k(n,t){var i={theme:o(r.settings.themes.gray,null),stylesheets:t.stylesheets,instanceOptions:t};return ft(n,i)}function ft(n,t){var e=n.split("?"),c=e[0].split("/"),s,u,i,h;return(t.holderURL=n,s=c[1],u=s.match(/([\d]+p?)x([\d]+p?)/),!u)?!1:(t.fluid=s.indexOf("p")!==-1,t.dimensions={width:u[1].replace("p","%"),height:u[2].replace("p","%")},e.length===2&&(i=it.parse(e[1]),i.bg&&(t.theme.background=(i.bg.indexOf("#")===-1?"#":"")+i.bg),i.fg&&(t.theme.foreground=(i.fg.indexOf("#")===-1?"#":"")+i.fg),i.bg&&!i.fg&&(t.autoFg=!0),i.theme&&t.instanceOptions.themes.hasOwnProperty(i.theme)&&(t.theme=o(t.instanceOptions.themes[i.theme],null)),i.text&&(t.text=i.text),i.textmode&&(t.textmode=i.textmode),i.size&&(t.size=i.size),i.font&&(t.font=i.font),i.align&&(t.align=i.align),t.nowrap=f.truthy(i.nowrap),t.auto=f.truthy(i.auto),t.outline=f.truthy(i.outline),f.truthy(i.random)&&(r.vars.cache.themeKeys=r.vars.cache.themeKeys||Object.keys(t.instanceOptions.themes),h=r.vars.cache.themeKeys[0|Math.random()*r.vars.cache.themeKeys.length],t.theme=o(t.instanceOptions.themes[h],null))),t)}function d(n){var h=n.mode,t=n.el,i=n.flags,d=n.engineSettings,s=i.dimensions,c=i.theme,k=s.width+"x"+s.height,l,v,p,e,w,b;if(h=h==null?i.fluid?"fluid":"image":h,i.text!=null&&(c.text=i.text,t.nodeName.toLowerCase()==="object")){for(l=c.text.split("\\n"),v=0;v<l.length;v++)l[v]=f.encodeHtmlEntity(l[v]);c.text=l.join("\\n")}p=i.holderURL;e=o(d,null);i.font&&(c.font=i.font,!e.noFontFallback&&t.nodeName.toLowerCase()==="img"&&r.setup.supportsCanvas&&e.renderer==="svg"&&(e=o(e,{renderer:"canvas"})));i.font&&e.renderer=="canvas"&&(e.reRender=!0);h=="background"?t.getAttribute("data-background-src")==null&&u.setAttr(t,{"data-background-src":p}):(w={},w[r.vars.dataAttr]=p,u.setAttr(t,w));i.theme=c;t.holderData={flags:i,engineSettings:e};(h=="image"||h=="fluid")&&u.setAttr(t,{alt:c.text?c.text+" ["+k+"]":k});b={mode:h,el:t,holderSettings:{dimensions:s,theme:c,flags:i},engineSettings:e};h=="image"?(e.renderer!="html"&&i.auto||(t.style.width=s.width+"px",t.style.height=s.height+"px"),e.renderer=="html"?t.style.backgroundColor=c.background:(y(b),i.textmode=="exact"&&(t.holderData.resizeUpdate=!0,r.vars.resizableImages.push(t),a(t)))):h=="background"&&e.renderer!="html"?y(b):h=="fluid"&&(t.holderData.resizeUpdate=!0,s.height.slice(-1)=="%"?t.style.height=s.height:i.auto!=null&&i.auto||(t.style.height=s.height+"px"),s.width.slice(-1)=="%"?t.style.width=s.width:i.auto!=null&&i.auto||(t.style.width=s.width+"px"),(t.style.display=="inline"||t.style.display===""||t.style.display=="none")&&(t.style.display="block"),st(t),e.renderer=="html"?t.style.backgroundColor=c.background:(r.vars.resizableImages.push(t),a(t)))}function y(n){function c(){var t=null;switch(o.renderer){case"canvas":t=lt(h,n);break;case"svg":t=at(h,n);break;default:throw"Holder: invalid renderer: "+o.renderer;}return t}var f=null,l=n.mode,i=n.el,e=n.holderSettings,o=n.engineSettings,s,h;switch(o.renderer){case"svg":if(!r.setup.supportsSVG)return;break;case"canvas":if(!r.setup.supportsCanvas)return;break;default:return}if(s={width:e.dimensions.width,height:e.dimensions.height,theme:e.theme,flags:e.flags},h=et(s),f=c(),f==null)throw"Holder: couldn't render placeholder";l=="background"?(i.style.backgroundImage="url("+f+")",i.style.backgroundSize=s.width+"px "+s.height+"px"):(i.nodeName.toLowerCase()==="img"?u.setAttr(i,{src:f}):i.nodeName.toLowerCase()==="object"&&(u.setAttr(i,{data:f}),u.setAttr(i,{type:"image/svg+xml"})),o.reRender&&t.setTimeout(function(){var n=c();if(n==null)throw"Holder: couldn't render placeholder";i.nodeName.toLowerCase()==="img"?u.setAttr(i,{src:n}):i.nodeName.toLowerCase()==="object"&&(u.setAttr(i,{data:n}),u.setAttr(i,{type:"image/svg+xml"}))},150));u.setAttr(i,{"data-holder-rendered":!0})}function et(n){function tt(n,t,i,r){t.width=i;t.height=r;n.width=Math.max(n.width,t.width);n.height+=t.height}var w=r.defaults.size,a,b,t,u,e,i,o,k,p,v,g;parseFloat(n.theme.size)?w=n.theme.size:parseFloat(n.flags.size)&&(w=n.flags.size);n.font={family:n.theme.font?n.theme.font:"Arial, Helvetica, Open Sans, sans-serif",size:ot(n.width,n.height,w),units:n.theme.units?n.theme.units:r.defaults.units,weight:n.theme.fontweight?n.theme.fontweight:"bold"};n.text=n.theme.text||Math.floor(n.width)+"x"+Math.floor(n.height);n.noWrap=n.theme.nowrap||n.flags.nowrap;n.align=n.theme.align||n.flags.align||"center";switch(n.flags.textmode){case"literal":n.text=n.flags.dimensions.width+"x"+n.flags.dimensions.height;break;case"exact":if(!n.flags.exactDimensions)break;n.text=Math.floor(n.flags.exactDimensions.width)+"x"+Math.floor(n.flags.exactDimensions.height)}var h=new rt({width:n.width,height:n.height}),f=h.Shape,l=new f.Rect("holderBg",{fill:n.theme.background});if(l.resize(n.width,n.height),h.root.add(l),n.flags.outline&&(a=new c(l.properties.fill),a=a.lighten(a.lighterThan("7f7f7f")?-.1:.1),l.properties.outline={fill:a.toHex(!0),width:2}),b=n.theme.foreground,n.flags.autoFg){var nt=new c(l.properties.fill),ut=new c("fff"),ft=new c("000",{alpha:.285714});b=nt.blendAlpha(nt.lighterThan("7f7f7f")?ft:ut).toHex(!0)}if(t=new f.Group("holderTextGroup",{text:n.text,align:n.align,font:n.font,fill:b}),t.moveTo(null,null,1),h.root.add(t),u=t.textPositionData=ct(h),!u)throw"Holder: staging fallback not supported yet.";if(t.properties.leading=u.boundingBox.height,e=null,i=null,o=n.width*r.vars.lineWrapRatio,k=o,u.lineCount>1){var s=0,it=0,d=0,y;for(i=new f.Group("line"+d),(n.align==="left"||n.align==="right")&&(k=n.width*(1-(1-r.vars.lineWrapRatio)*2)),p=0;p<u.words.length;p++)(v=u.words[p],e=new f.Text(v.text),g=v.text=="\\n",!n.noWrap&&(s+v.width>=k||g===!0)&&(tt(t,i,s,t.properties.leading),t.add(i),s=0,it+=t.properties.leading,d+=1,i=new f.Group("line"+d),i.y=it),g!==!0)&&(e.moveTo(s,0),s+=u.spaceWidth+v.width,i.add(e));if(tt(t,i,s,t.properties.leading),t.add(i),n.align==="left")t.moveTo(n.width-o,null,null);else if(n.align==="right"){for(y in t.children)i=t.children[y],i.moveTo(n.width-i.width,null,null);t.moveTo(0-(n.width-o),null,null)}else{for(y in t.children)i=t.children[y],i.moveTo((t.width-i.width)/2,null,null);t.moveTo((n.width-t.width)/2,null,null)}t.moveTo(null,(n.height-t.height)/2,null);(n.height-t.height)/2<0&&t.moveTo(null,0,null)}else e=new f.Text(n.text),i=new f.Group("line0"),i.add(e),t.add(i),n.align==="left"?t.moveTo(n.width-o,null,null):n.align==="right"?t.moveTo(0-(n.width-o),null,null):t.moveTo((n.width-u.boundingBox.width)/2,null,null),t.moveTo(null,(n.height-u.boundingBox.height)/2,null);return h}function ot(n,t,i){var u=parseInt(n,10),f=parseInt(t,10),e=Math.max(u,f),o=Math.min(u,f),s=.8*Math.min(o,e*r.defaults.scale);return Math.round(Math.max(i,s))}function a(n){var o,f,h,t,i,u,e,s;for(o=n==null||n.nodeType==null?r.vars.resizableImages:[n],f=0,h=o.length;f<h;f++)if(t=o[f],t.holderData)if(i=t.holderData.flags,u=v(t),u){if(!t.holderData.resizeUpdate)continue;if(i.fluid&&i.auto){e=t.holderData.fluidConfig;switch(e.mode){case"width":u.height=u.width/e.ratio;break;case"height":u.width=u.height*e.ratio}}s={mode:"image",holderSettings:{dimensions:u,theme:i.theme,flags:i},el:t,engineSettings:t.holderData.engineSettings};i.textmode=="exact"&&(i.exactDimensions=u,s.holderSettings.dimensions=i.dimensions);y(s)}else nt(t)}function st(n){var r,i,t;n.holderData&&(r=v(n),r?(i=n.holderData.flags,t={fluidHeight:i.dimensions.height.slice(-1)=="%",fluidWidth:i.dimensions.width.slice(-1)=="%",mode:null,initialDimensions:r},t.fluidWidth&&!t.fluidHeight?(t.mode="width",t.ratio=t.initialDimensions.width/parseFloat(i.dimensions.height)):!t.fluidWidth&&t.fluidHeight&&(t.mode="height",t.ratio=parseFloat(i.dimensions.width)/t.initialDimensions.height),n.holderData.fluidConfig=t):nt(n))}function g(){for(var u=[],f=Object.keys(r.vars.invisibleImages),n,i=0,e=f.length;i<e;i++)n=r.vars.invisibleImages[f[i]],v(n)&&n.nodeName.toLowerCase()=="img"&&(u.push(n),delete r.vars.invisibleImages[f[i]]);u.length&&l.run({images:u});t.requestAnimationFrame(g)}function ht(){r.vars.visibilityCheckStarted||(t.requestAnimationFrame(g),r.vars.visibilityCheckStarted=!0)}function nt(n){n.holderData.invisibleId||(r.vars.invisibleId+=1,r.vars.invisibleImages["i"+r.vars.invisibleId]=n,n.holderData.invisibleId=r.vars.invisibleId)}function vt(n){r.vars.debounceTimer||n.call(this);r.vars.debounceTimer&&t.clearTimeout(r.vars.debounceTimer);r.vars.debounceTimer=t.setTimeout(function(){r.vars.debounceTimer=null;n.call(this)},r.setup.debounce)}function p(){vt(function(){a(null)})}var w=i(3),it=i(2),rt=i(4),f=i(5),h=i(6),u=i(7),c=i(8),o=f.extend,v=f.dimensionCheck,e="http://www.w3.org/2000/svg",b="2.8.0",ut="\nCreated with Holder.js "+b+".\nLearn more at http://holderjs.com\n(c) 2012-2015 Ivan Malopinsky - http://imsky.co\n",l={version:b,addTheme:function(n,t){return n!=null&&t!=null&&(r.settings.themes[n]=t),delete r.vars.cache.themeKeys,this},addImage:function(n,t){var f=u.getNodeArray(t),i,s,e,o;if(f.length)for(i=0,s=f.length;i<s;i++)e=u.newEl("img"),o={},o[r.setup.dataAttr]=n,u.setAttr(e,o),f[i].appendChild(e);return this},setResizeUpdate:function(n,t){n.holderData&&(n.holderData.resizeUpdate=!!t,n.holderData.resizeUpdate&&a(n))},run:function(n){var h,i,e,y,et,v,ot,st,tt,it,w,l,ht,ct,a,c;n=n||{};h={};i=o(r.settings,n);r.vars.preempted=!0;r.vars.dataAttr=i.dataAttr||r.setup.dataAttr;r.vars.lineWrapRatio=i.lineWrapRatio||r.setup.lineWrapRatio;h.renderer=i.renderer?i.renderer:r.setup.renderer;r.setup.renderers.join(",").indexOf(h.renderer)===-1&&(h.renderer=r.setup.supportsSVG?"svg":r.setup.supportsCanvas?"canvas":"html");var rt=u.getNodeArray(i.images),b=u.getNodeArray(i.bgnodes),ut=u.getNodeArray(i.stylenodes),ft=u.getNodeArray(i.objects);for(h.stylesheets=[],h.svgXMLStylesheet=!0,h.noFontFallback=i.noFontFallback?i.noFontFallback:!1,e=0;e<ut.length;e++)y=ut[e],y.attributes.rel&&y.attributes.href&&y.attributes.rel.value=="stylesheet"&&(et=y.attributes.href.value,v=u.newEl("a"),v.href=et,ot=v.protocol+"//"+v.host+v.pathname+v.search,h.stylesheets.push(ot));for(e=0;e<b.length;e++)if(t.getComputedStyle){var at=t.getComputedStyle(b[e],null).getPropertyValue("background-image"),vt=b[e].getAttribute("data-background-src"),p=vt||at,g=null,nt="?"+i.domain+"/";p.indexOf(nt)===0?g=p.slice(1):p.indexOf(nt)!=-1&&(st=p.substr(p.indexOf(nt)).slice(1),tt=st.match(/([^\"]*)"?\)/),tt!=null&&(g=tt[1]));g!=null&&(it=k(g,i),it&&d({mode:"background",el:b[e],flags:it,engineSettings:h}))}for(e=0;e<ft.length;e++){w=ft[e];l={};try{l.data=w.getAttribute("data");l.dataSrc=w.getAttribute(r.vars.dataAttr)}catch(wt){}ht=l.data!=null&&l.data.indexOf(i.domain)===0;ct=l.dataSrc!=null&&l.dataSrc.indexOf(i.domain)===0;ht?s(i,h,l.data,w):ct&&s(i,h,l.dataSrc,w)}for(e=0;e<rt.length;e++){a=rt[e];c={};try{c.src=a.getAttribute("src");c.dataSrc=a.getAttribute(r.vars.dataAttr);c.rendered=a.getAttribute("data-holder-rendered")}catch(wt){}var yt=c.src!=null,lt=c.dataSrc!=null&&c.dataSrc.indexOf(i.domain)===0,pt=c.rendered!=null&&c.rendered=="true";yt?c.src.indexOf(i.domain)===0?s(i,h,c.src,a):lt&&(pt?s(i,h,c.dataSrc,a):function(n,t,i,r,u){f.imageExists(n,function(n){n||s(t,i,r,u)})}(c.src,i,h,c.dataSrc,a)):lt&&s(i,h,c.dataSrc,a)}return this}},r={settings:{domain:"holder.js",images:"img",objects:"object",bgnodes:"body .holderjs",stylenodes:"head link.holderjs",themes:{gray:{background:"#EEEEEE",foreground:"#AAAAAA"},social:{background:"#3a5a97",foreground:"#FFFFFF"},industrial:{background:"#434A52",foreground:"#C2F200"},sky:{background:"#0D8FDB",foreground:"#FFFFFF"},vine:{background:"#39DBAC",foreground:"#1E292C"},lava:{background:"#F8591A",foreground:"#1C2846"}}},defaults:{size:10,units:"pt",scale:1/16}},ct=function(){var n=null,t=null,i=null;return function(o){var a=o.root,v,w,b,s,c,g;if(r.setup.supportsSVG){v=!1;w=function(n){return document.createTextNode(n)};(n==null||n.parentNode!==document.body)&&(v=!0);n=h.initSVG(n,a.properties.width,a.properties.height);n.style.display="block";v&&(t=u.newEl("text",e),i=w(null),u.setAttr(t,{x:0}),t.appendChild(i),n.appendChild(t),document.body.appendChild(n),n.style.visibility="hidden",n.style.position="absolute",n.style.top="-100%",n.style.left="-100%");b=a.children.holderTextGroup;s=b.properties;u.setAttr(t,{y:s.font.size,style:f.cssProps({"font-weight":s.font.weight,"font-size":s.font.size+s.font.units,"font-family":s.font.family})});i.nodeValue=s.text;var y=t.getBBox(),p=Math.ceil(y.width/(a.properties.width*r.vars.lineWrapRatio)),l=s.text.split(" "),k=s.text.match(/\\n/g);p+=k==null?0:k.length;i.nodeValue=s.text.replace(/[ ]+/g,"");var nt=t.getComputedTextLength(),tt=y.width-nt,it=Math.round(tt/Math.max(1,l.length-1)),d=[];if(p>1)for(i.nodeValue="",c=0;c<l.length;c++)l[c].length!==0&&(i.nodeValue=f.decodeHtmlEntity(l[c]),g=t.getBBox(),d.push({text:l[c],width:g.width}));return n.style.display="none",{spaceWidth:it,lineCount:p,boundingBox:y,words:d}}return!1}}(),lt=function(){var t=u.newEl("canvas"),n=null;return function(i){var o,f,y,a,c,v;n==null&&(n=t.getContext("2d"));o=i.root;t.width=r.dpr(o.properties.width);t.height=r.dpr(o.properties.height);n.textBaseline="middle";var e=o.children.holderBg,s=r.dpr(e.width),h=r.dpr(e.height),u=1;n.fillStyle=e.properties.fill;n.fillRect(0,0,s,h);e.properties.outline&&(n.strokeStyle=e.properties.outline.fill,n.lineWidth=e.properties.outline.width,n.moveTo(u,u),n.lineTo(s-u,u),n.lineTo(s-u,h-u),n.lineTo(u,h-u),n.lineTo(u,u),n.moveTo(0,u),n.lineTo(s,h-u),n.moveTo(0,h-u),n.lineTo(s,u),n.stroke());f=o.children.holderTextGroup;y=f.properties;n.font=f.properties.font.weight+" "+r.dpr(f.properties.font.size)+f.properties.font.units+" "+f.properties.font.family+", monospace";n.fillStyle=f.properties.fill;for(a in f.children){c=f.children[a];for(v in c.children){var l=c.children[v],p=r.dpr(f.x+c.x+l.x),w=r.dpr(f.y+c.y+l.y+f.properties.leading/2);n.fillText(l.properties.text,p,w)}}return t.toDataURL("image/png")}}(),at=function(){if(t.XMLSerializer){var r=u.createXML(),n=h.initSVG(null,0,0),i=u.newEl("rect",e);return n.appendChild(i),function(t,o){var w=t.root,b,a,it,p,rt;for(h.initSVG(n,w.properties.width,w.properties.height),b=n.querySelectorAll("g"),a=0;a<b.length;a++)b[a].parentNode.removeChild(b[a]);var et=o.holderSettings.flags.holderURL,g="holder_"+(Number(new Date)+32768+(0|Math.random()*32768)).toString(16),v=u.newEl("g",e),l=w.children.holderTextGroup,y=l.properties,nt=u.newEl("g",e),ot=l.textPositionData,st="#"+g+" text { "+f.cssProps({fill:y.fill,"font-weight":y.font.weight,"font-family":y.font.family+", monospace","font-size":y.font.size+y.font.units})+" } ",ht=r.createComment("\nSource URL: "+et+ut),ct=r.createCDATASection(st),lt=n.querySelector("style"),s=w.children.holderBg;if(u.setAttr(v,{id:g}),n.insertBefore(ht,n.firstChild),lt.appendChild(ct),v.appendChild(i),s.properties.outline){var tt=u.newEl("path",e),at=s.properties.outline.width,c=at/2;u.setAttr(tt,{d:["M",c,c,"H",s.width-c,"V",s.height-c,"H",c,"V",0,"M",0,c,"L",s.width,s.height-c,"M",0,s.height-c,"L",s.width,c].join(" "),"stroke-width":s.properties.outline.width,stroke:s.properties.outline.fill,fill:"none"});v.appendChild(tt)}v.appendChild(nt);n.appendChild(v);u.setAttr(i,{width:s.width,height:s.height,fill:s.properties.fill});l.y+=ot.boundingBox.height*.8;for(it in l.children){p=l.children[it];for(rt in p.children){var k=p.children[rt],vt=l.x+p.x+k.x,yt=l.y+p.y+k.y,d=u.newEl("text",e),ft=document.createTextNode(null);u.setAttr(d,{x:vt,y:yt});ft.nodeValue=k.properties.text;d.appendChild(ft);nt.appendChild(d)}}return h.svgStringToDataURI(h.serializeSVG(n,o.engineSettings),o.mode==="background")}}}();for(var tt in r.flags)r.flags.hasOwnProperty(tt)&&(r.flags[tt].match=function(n){return n.match(this.regex)});r.setup={renderer:"html",debounce:100,ratio:1,supportsCanvas:!1,supportsSVG:!1,lineWrapRatio:.9,dataAttr:"data-src",renderers:["html","canvas","svg"]};r.dpr=function(n){return n*r.setup.ratio};r.vars={preempted:!1,resizableImages:[],invisibleImages:{},invisibleId:0,visibilityCheckStarted:!1,debounceTimer:null,cache:{}},function(){var f=1,o=1,i=u.newEl("canvas"),n=null;i.getContext&&i.toDataURL("image/png").indexOf("data:image/png")!=-1&&(r.setup.renderer="canvas",n=i.getContext("2d"),r.setup.supportsCanvas=!0);r.setup.supportsCanvas&&(f=t.devicePixelRatio||1,o=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1);r.setup.ratio=f/o;!document.createElementNS||!document.createElementNS(e,"svg").createSVGRect||(r.setup.renderer="svg",r.setup.supportsSVG=!0)}();ht();w&&w(function(){r.vars.preempted||l.run();t.addEventListener?(t.addEventListener("resize",p,!1),t.addEventListener("orientationchange",p,!1)):t.attachEvent("onresize",p);typeof t.Turbolinks=="object"&&t.document.addEventListener("page:change",function(){l.run()})});n.exports=l}).call(t,function(){return this}())},function(n,t,i){var r=encodeURIComponent,u=decodeURIComponent,f=i(10),e=i(9),o=/(\w+)\[(\d+)\]/,s=/\w+\.\w+/;t.parse=function(n){var e,a,c,h,l,t,i,r;if("string"!=typeof n)return{};if(n=f(n),""===n)return{};for("?"===n.charAt(0)&&(n=n.slice(1)),e={},a=n.split("&"),c=0;c<a.length;c++){if(h=a[c].split("="),l=u(h[0]),t=o.exec(l)){e[t[1]]=e[t[1]]||[];e[t[1]][t[2]]=u(h[1]);continue}if(t=s.test(l)){for(t=l.split("."),i=e;t.length;)if(r=t.shift(),r.length){if(i[r]){if(i[r]&&typeof i[r]!="object")break}else i[r]={};t.length||(i[r]=u(h[1]));i=i[r]}continue}e[h[0]]=null==h[1]?"":u(h[1])}return e};t.stringify=function(n){var u,t,f,i;if(!n)return"";u=[];for(t in n){if(f=n[t],"array"==e(f)){for(i=0;i<f.length;++i)u.push(r(t+"["+i+"]")+"="+r(f[i]));continue}u.push(r(t)+"="+r(n[t]))}return u.join("&")}},function(n){
/*!
	 * onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license
	 *
	 * Specially modified to work with Holder.js
	 */
function t(n){function s(n){if(!u){if(!t.body)return f(s);for(u=!0;n=g.shift();)f(n)}}function i(n){(c||n.type===e||t[y]===v)&&(nt(),s())}function nt(){c?(t[d](b,i,r),n[d](e,i,r)):(t[w](k,i),n[w](a,i))}function f(n,t){setTimeout(n,+t>=0?t:1)}function l(n){u?f(n):g.push(n)}document.readyState==null&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function tt(){document.removeEventListener("DOMContentLoaded",tt,!1);document.readyState="complete"},!1),document.readyState="loading");var t=n.document,it=t.documentElement,e="load",r=!1,a="on"+e,v="complete",y="readyState",p="attachEvent",w="detachEvent",h="addEventListener",b="DOMContentLoaded",k="onreadystatechange",d="removeEventListener",c=h in t,o=r,u=r,g=[];if(t[y]===v)f(s);else if(c)t[h](b,i,r),n[h](e,i,r);else{t[p](k,i);n[p](a,i);try{o=n.frameElement==null&&it}catch(ut){}o&&o.doScroll&&function rt(){if(!u){try{o.doScroll("left")}catch(n){return f(rt,50)}nt();s()}}()}return l.version="1.4.0",l.isReady=function(){return u},l}n.exports=typeof window!="undefined"&&t(window)},function(n){var t=function(n){function h(n,t){for(var i in t)n[i]=t[i];return n}var r=1,i=function(n){r++;this.parent=null;this.children={};this.id=r;this.name="n"+r;typeof n!="undefined"&&(this.name=n);this.x=this.y=this.z=0;this.width=this.height=0},u,t,f,e,o,s;return i.prototype.resize=function(n,t){n!=null&&(this.width=n);t!=null&&(this.height=t)},i.prototype.moveTo=function(n,t,i){this.x=n!=null?n:this.x;this.y=t!=null?t:this.y;this.z=i!=null?i:this.z},i.prototype.add=function(n){var t=n.name;if(typeof this.children[t]=="undefined")this.children[t]=n,n.parent=this;else throw"SceneGraph: child already exists: "+t;},u=function(){i.call(this,"root");this.properties=n},u.prototype=new i,t=function(n,t){if(i.call(this,n),this.properties={fill:"#000000"},typeof t!="undefined")h(this.properties,t);else if(typeof n!="undefined"&&typeof n!="string")throw"SceneGraph: invalid node name";},t.prototype=new i,f=function(){t.apply(this,arguments);this.type="group"},f.prototype=new t,e=function(){t.apply(this,arguments);this.type="rect"},e.prototype=new t,o=function(n){t.call(this);this.type="text";this.properties.text=n},o.prototype=new t,s=new u,this.Shape={Rect:e,Text:o,Group:f},this.root=s,this};n.exports=t},function(n,t){t.extend=function(n,t){var u={},i,r;for(i in n)n.hasOwnProperty(i)&&(u[i]=n[i]);if(t!=null)for(r in t)t.hasOwnProperty(r)&&(u[r]=t[r]);return u};t.cssProps=function(n){var i=[];for(var t in n)n.hasOwnProperty(t)&&i.push(t+":"+n[t]);return i.join(";")};t.encodeHtmlEntity=function(n){for(var i=[],r=0,t=n.length-1;t>=0;t--)r=n.charCodeAt(t),r>128?i.unshift(["&#",r,";"].join("")):i.unshift(n[t]);return i.join("")};t.imageExists=function(n,t){var i=new Image;i.onerror=function(){t.call(this,!1)};i.onload=function(){t.call(this,!0)};i.src=n};t.decodeHtmlEntity=function(n){return n.replace(/&#(\d+);/g,function(n,t){return String.fromCharCode(t)})};t.dimensionCheck=function(n){var t={height:n.clientHeight,width:n.clientWidth};return t.height&&t.width?t:!1};t.truthy=function(n){return typeof n=="string"?n==="true"||n==="yes"||n==="1"||n==="on"||n==="✓":!!n}},function(n,t,i){(function(n){var r=i(7),u="http://www.w3.org/2000/svg",f=8;t.initSVG=function(n,t,i){var s,e,h=!1,o;for(n&&n.querySelector?(e=n.querySelector("style"),e===null&&(h=!0)):(n=r.newEl("svg",u),h=!0),h&&(s=r.newEl("defs",u),e=r.newEl("style",u),r.setAttr(e,{type:"text/css"}),s.appendChild(e),n.appendChild(s)),n.webkitMatchesSelector&&n.setAttribute("xmlns",u),o=0;o<n.childNodes.length;o++)n.childNodes[o].nodeType===f&&n.removeChild(n.childNodes[o]);while(e.childNodes.length)e.removeChild(e.childNodes[0]);return r.setAttr(n,{width:t,height:i,viewBox:"0 0 "+t+" "+i,preserveAspectRatio:"none"}),n};t.svgStringToDataURI=function(){var n="data:image/svg+xml;charset=UTF-8,",t="data:image/svg+xml;charset=UTF-8;base64,";return function(i,r){return r?t+btoa(unescape(encodeURIComponent(i))):n+encodeURIComponent(i)}}();t.serializeSVG=function(t,i){var u,f,c,e;if(n.XMLSerializer){var o=new XMLSerializer,s="",h=i.stylesheets;if(i.svgXMLStylesheet){for(u=r.createXML(),f=h.length-1;f>=0;f--)c=u.createProcessingInstruction("xml-stylesheet",'href="'+h[f]+'" rel="stylesheet"'),u.insertBefore(c,u.firstChild);u.removeChild(u.documentElement);s=o.serializeToString(u)}return e=o.serializeToString(t),e=e.replace(/\&amp;(\#[0-9]{2,}\;)/g,"&$1"),s+e}}}).call(t,function(){return this}())},function(n,t){(function(n){t.newEl=function(t,i){if(n.document)return i==null?document.createElement(t):document.createElementNS(i,t)};t.setAttr=function(n,t){for(var i in t)n.setAttribute(i,t[i])};t.createXML=function(){if(n.DOMParser)return(new DOMParser).parseFromString("<xml />","application/xml")};t.getNodeArray=function(t){var i=null;return typeof t=="string"?i=document.querySelectorAll(t):n.NodeList&&t instanceof n.NodeList?i=t:n.Node&&t instanceof n.Node?i=[t]:n.HTMLCollection&&t instanceof n.HTMLCollection?i=t:t instanceof Array?i=t:t===null&&(i=[]),i}}).call(t,function(){return this}())},function(n){function i(n){return this.rgb={},this.yuv={},this.raw=n,this.rgb.r=(n&16711680)>>16,this.rgb.g=(n&65280)>>8,this.rgb.b=n&255,this.yuv.y=.2126*this.rgb.r+.7152*this.rgb.g+.0722*this.rgb.b,this.yuv.u=-.09991*this.rgb.r-.33609*this.rgb.g+.436*this.rgb.b,this.yuv.v=.615*this.rgb.r-.55861*this.rgb.g-.05639*this.rgb.b,this}var t=function(n,t){typeof n=="string"&&((n.charAt(0)==="#"&&(n=n.slice(1)),/[^a-f0-9]+/i.test(n))||(n.length===3&&(n=n.replace(/./g,"$&$&")),n.length===6)&&(this.alpha=1,t&&(this.alpha=t.alpha||this.alpha),i.call(this,parseInt(n,16))))};t.rgbToHex=function(n,t,i){return(((n|0)<<16)+((t|0)<<8)+(i|0)).toString(16)};t.prototype.lighten=function(n){var r=this.rgb.r,u=this.rgb.g,f=this.rgb.b,i=255*n|0;return new t(t.rgbToHex(r+i,u+i,f+i))};t.prototype.toHex=function(n){return(n?"#":"")+this.raw.toString(16)};t.prototype.lighterThan=function(n){return n instanceof t||(n=new t(n)),this.yuv.y>n.yuv.y};t.prototype.blendAlpha=function(n){n instanceof t||(n=new t(n));var i=n,r=this,u=i.alpha*i.rgb.r+(1-i.alpha)*r.rgb.r,f=i.alpha*i.rgb.g+(1-i.alpha)*r.rgb.g,e=i.alpha*i.rgb.b+(1-i.alpha)*r.rgb.b;return new t(t.rgbToHex(u,f,e))};n.exports=t},function(n){var t=Object.prototype.toString;n.exports=function(n){switch(t.call(n)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return n===null?"null":n===undefined?"undefined":n!==n?"nan":n&&n.nodeType===1?"element":(n=n.valueOf?n.valueOf():Object.prototype.valueOf.apply(n),typeof n)}},function(n,t){function i(n){return n.replace(/^\s*|\s*$/g,"")}t=n.exports=i;t.left=function(n){return n.replace(/^\s*/,"")};t.right=function(n){return n.replace(/\s*$/,"")}}])}),function(n,t){t&&(Holder=n.Holder)}(this,typeof Meteor!="undefined"&&typeof Package!="undefined");
//# sourceMappingURL=holder.min.js.map
